<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>
	<ui:param name="_newQuestion" value="#{survey.newQuestion}"/>
	<ui:param name="_newResponse" value="#{survey.newResponse}"/>
	
	<div>Add survey questions.</div>
	<h:form>
		<h:panelGrid columns="1">
			<h:selectOneMenu value="#{survey.questionType}" valueChangeListener="#{survey.onQuestionTypeChange}" onchange="submit()">
				<f:selectItem itemValue="MULTIPLE" itemLabel="Multi-Select"/>
				<f:selectItem itemValue="SINGLE" itemLabel="Single-Select"/>
				<f:selectItem itemValue="TEXT" itemLabel="Text Input"/>
			</h:selectOneMenu>
			
			<h:inputText value="#{_newQuestion.text}"/>
			<h:panelGroup layout="block" rendered="#{_newQuestion.type == 'MULTIPLE'}">				 
				Options
				<h:selectManyCheckbox value="#{_newQuestion.list}" disabled="true">
					<f:selectItems value="#{survey.responses}" var="_entry" itemValue="#{_entry.value}" itemLabel="#{_entry.text}" />
				</h:selectManyCheckbox>
				Add New Options	
				<h:inputText value="#{_newResponse.text}"/>
				<h:commandButton value="Add" actionListener="#{survey.addNewResponse}"/>
				<h:commandButton value="Remove"/>				
			</h:panelGroup>
			<h:panelGroup layout="block" rendered="#{_newQuestion.type == 'SINGLE'}">				 
				Options
				<h:selectOneRadio value="#{_newQuestion.value}" disabled="true">
					<f:selectItems value="#{survey.responses}" var="_entry" itemValue="#{_entry.value}" itemLabel="#{_entry.text}" />
				</h:selectOneRadio>
				Add New Options
				<h:inputText value="#{_newResponse.text}"/>	
				<h:commandButton value="Add" actionListener="#{survey.addNewResponse}"/>
				<h:commandButton value="Remove"/>										
			</h:panelGroup>
				
			
		</h:panelGrid>
		<h:panelGrid columns="2" cellspacing="10">
			<h:commandLink value="Back">
				<f:setPropertyActionListener target="#{survey.selected}" value="#{null}"></f:setPropertyActionListener>
			</h:commandLink>
			<h:commandButton value="Add Another" actionListener="#{survey.addSurveyQuestion}"/>
		</h:panelGrid>		
	</h:form>
</h:body>


</html>